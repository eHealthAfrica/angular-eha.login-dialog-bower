angular.module("eha.login-dialog.template",["templates/login-dialog.template.tpl.html"]),angular.module("templates/login-dialog.template.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/login-dialog.template.tpl.html",'<div class="modal-header alert-info">\n  <i class="fa fa-lock"></i>\n  <span translate>Authentication</span>\n</div>\n\n<div class="modal-body">\n  <form\n    role="form"\n    name="login-form"\n    ng-submit="authenticate(username, passkey)"\n  >\n    <div class="col-md-15">\n      <div class="alert alert-danger" role="alert" ng-if="wrongPasskey === true">\n        <span translate>Wrong password. If you are sure you entered the correct password, contact support.</span>\n      </div>\n      <div class="alert alert-warning" role="alert" ng-if="cannotReachServer === true || !online">\n        <h4 translate>Offline</h4>\n        <p translate>You seem to be offline, so we could not check your password. Please check your connection and try again.</p>\n      </div>\n      <div class="form-group">\n        <label translate>Username</label>\n        <input\n          autofocus\n          type="text"\n          class="form-control"\n          placeholder=""\n          ng-model="username"\n          ng-disabled="!online"\n          tab-to-next-input-on-enter\n          autocomplete="off"\n          autocorrect="off"\n          autocapitalize="off"\n          spellcheck="false"\n        >\n        <label translate>Password</label>\n        <input\n          type="password"\n          class="form-control"\n          placeholder=""\n          ng-model="passkey"\n          ng-disabled="!online"\n          autocomplete="off"\n          autocorrect="off"\n          autocapitalize="off"\n          spellcheck="false"\n        >\n      </div>\n      <button type="submit" class="btn btn-success" ng-disabled="!online">\n        <i\n          class="fa"\n          ng-class="isAuthenticating && \'fa-spinner fa-spin\' || \'fa-chevron-circle-right\'"\n        ></i>\n        <span translate>Login</span>\n      </button>\n      <button type="submit" class="btn btn-default" ng-click="cancel()">\n        <span translate>Cancel</span>\n      </button>\n    </div>\n  </form>\n</div>\n')}]),function(){"use strict";var a=angular.module("eha.login-dialog",["eha.login-dialog.service","eha.login-dialog.template","eha.login-dialog.controller"]);"undefined"!=typeof module&&module.exports&&(module.exports=a)}(),function(){"use strict";var a=angular.module("eha.login-dialog.controller",[]);a.controller("EhaLoginDialogController",["$scope","$modalInstance","modalParams","ehaLoginService",function(a,b,c,d){a.headerMessage=angular.isArray(c.title)?"":c.title,a.headerMessage2=c.title,a.bodyMessage=c.bodyText,a.confirmBtnMsg=c.buttonLabels.YES,a.cancelBtnMsg=c.buttonLabels.NO,a.confirm=b.close,a.cancel=b.dismiss,a.wrongPasskey=!1,a.dismissMessage="Cancel confirm dialog",a.online=!0,a.authenticate=function(c,e){return a.wrongPasskey=!1,a.isAuthenticating=!0,a.cannotReachServer=!1,c&&e?d.login(c,e).then(b.close)["catch"](function(b){401===b.status?a.wrongPasskey=!0:a.cannotReachServer=!0,console.log("error",b)})["finally"](function(){a.isAuthenticating=!1}):(a.wrongPasskey=!0,void(a.isAuthenticating=!1))},console.log(a.cannotReachServer),a.cancel=function(){b.dismiss("cancelled")}}]),"undefined"!=typeof module&&module.exports&&(module.exports=a)}(),function(){"use strict";var a=angular.module("eha.login-dialog.service",["gettext","ui.bootstrap.modal"]);a.service("ehaLoginDialogService",["$q","$log","$modal","gettextCatalog",function(a,b,c,d){var e;return function(){if(e)return e;var a=[d.getString("yes"),d.getString("no")],b=c.open({templateUrl:"templates/login-dialog.template.tpl.html",backdrop:"static",keyboard:!1,resolve:{modalParams:["$q",function(b){return b.when({buttonLabels:{YES:a[0],NO:a[1]}})}]},controller:"EhaLoginDialogController"});return e=b.result,b.result["finally"](function(){e=null}),b.result}}]),"undefined"!=typeof module&&module.exports&&(module.exports=a)}();